package realworldsoftwdevelop.bankstatements.utils;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;

import realworldsoftwdevelop.bankstatements.entity.BankTransaction;

public class BankStatementCSVParser {
	
	private static final DateTimeFormatter DATE_PATTERN = DateTimeFormatter.ofPattern("dd-MM-yyyy");
	
	private BankTransaction parseBankTransaction(final String line) {
		if(line != null && !"".equals(line)) {
			String[] bankArray = line.split(",");
			LocalDate localDate = LocalDate.parse(bankArray[0], DATE_PATTERN);
			Double amount = Double.parseDouble(bankArray[1]);
			String description = bankArray[2];
			return new BankTransaction(localDate, amount, description);
		}
		return null;
	}
	
	public List<BankTransaction> parseLinesFromCSV(List<String> lines) {
		List<BankTransaction> bankTransactions = new ArrayList<>();
		if(lines != null) {
			for(String line : lines) {
				BankTransaction bankTransaction = parseBankTransaction(line);
				bankTransactions.add(bankTransaction);
			}
		}
		return bankTransactions;
	}

}
